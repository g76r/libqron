graph g {

// configuration objects carrying params
node [shape=box,style=filled,color=powderblue]
global [label="Global Params"]
supertask [label="Supertask Params"]
taskgroup [label="Task Group Params"]
task [label="Task Params"]
eventsubscription [label="Event Subscription Params"]
noticetrigger [label="Notice Trigger\nOverriding Params"]
crontrigger [label="Cron Trigger\nOverriding Params"]
requesttaskaction [label="Request Task Action\nOverriding Params"]

// runtime objects carrying params
node [shape=ellipse]
taskinstance [label="Task Instance Params\n(as overriden on request)"]
event [label="Event Params"]
notice [label="Notice Params"]

// actors
node [shape=hexagon,style=dashed,color=""]
restapi [label="REST API"]
//time [label="time"]

// ParamSet inheritage (mostly in configuration)
edge [dir=back,arrowtail=onormal]
global -- taskgroup -- supertask
supertask -- task [label="(if workflow subtask)"]
taskgroup -- task [label="(otherwise)"]
task -- taskinstance
eventsubscription -- event
taskinstance -- eventsubscription [label="(if event occurs\nwithin task)",weight=0]
global -- eventsubscription [label="(otherwise)"]
global -- notice

// parameter injection at runtime
edge [dir=forward,arrowhead=vee]
crontrigger -- taskinstance
noticetrigger -- taskinstance
event -- notice [label="postnotice\naction"]
notice -- event [label="onnotice\nevent"]
restapi [label="rest api"]
restapi -- notice [label="postnotice\ncall"]
requesttaskaction -- taskinstance
restapi -- taskinstance [label="requesttask\ncall"]
//time -- crontrigger
crontrigger -- event [label="ontrigger\nevent\n(in workflow)"]
noticetrigger -- event [label="ontrigger\nevent\n(in workflow)"]

// context for parameters evaluation
edge [dir=forward,arrowhead=dot]
notice -- noticetrigger
global -- crontrigger
event -- requesttaskaction [label="requesttask\naction"]

}
