<!DOCTYPE html>
<!--
 Copyright 2012-2014 Hallowyn and others.
 This file is part of qron, see <http://qron.hallowyn.com/>.
 Qron is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 Qron is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 You should have received a copy of the GNU Affero General Public License
 along with qron. If not, see <http://www.gnu.org/licenses/>.
-->
<?include:header.html?>

    <div class="container">
      <?value:message?>
      <div class="row">
        <div class="span12">
          <h2>Task <?value:taskid?></h2>
          <p><a class="btn btn-danger" href="requestform?taskid=<?value:taskid?>"><i class="icon-play"></i> Request task execution</a>
          <a class="btn btn-danger" href="do?event=enableTask&amp;enable=false&amp;taskid=<?value:taskid?>"><i class="icon-block"></i> Disable task</a>
          <a class="btn btn-warning" href="do?event=enableTask&amp;enable=true&amp;taskid=<?value:taskid?>"><i class="icon-block"></i> Enable task</a>
          <?value:customactions?>
        </div>
      </div>
      <div class="row">
        <div class="span8">
          <h3>Task Description</h3>
          <p><a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <a class="btn btn-info" href="index.html">Overview page &raquo;</a>
          <p><table class="table table-condensed table-hover">
          <?value:description?>
          </table>
        </div>
        <div class="span4">
          <h3>Task Status</h3>
          <p><a class="btn btn-primary" href="../rest/txt/log/all/v1?regexp=^[^ ]* <?value:taskid?>[/:]" target="_blank"><i class="icon-file"></i> Task log</a>
          <p><table class="table table-condensed table-hover">
          <?value:status?>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="span12">
          <h3>Task Parameters and Resources</h3>
          <p><a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <a class="btn btn-info" href="resources.html">Resources page &raquo;</a>
          <p><table class="table table-condensed table-hover">
          <?value:params?>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="span12">
          <h3>Task Workflow Diagram</h3>
          <p><a class="btn btn-primary" href="../rest/svg/tasks/workflow/v1?taskid=<?value:taskid?>"><i class="icon-file"></i> SVG</a>
          <a class="btn btn-primary" href="../rest/dot/tasks/workflow/v1?taskid=<?value:taskid?>"><i class="icon-file"></i> DOT</a>
          <a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <div id="workflowDiagram" style="display: table; margin: 0 auto;">
            <noscript><img src="../rest/svg/tasks/workflow/v1?taskid=<?value:taskid?>" alt="Task Workflow Diagram"/></noscript>
          </div>
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
$(document).ready(function(){
  $('#workflowDiagram').load('../rest/svg/tasks/workflow/v1?taskid=<?value:taskid?>', function() {
    $("a").not("[xlink\\:title='']").each(function() {
      this.setAttributeNS('http://www.w3.org/1999/xlink','href','taskdoc.html?taskid='+$(this).attr('xlink:title'));
    });
  });
});
    </script>
<?include:footer.html?>
